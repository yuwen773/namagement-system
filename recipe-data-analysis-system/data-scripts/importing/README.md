# 数据导入脚本

本目录包含将清洗后的数据导入数据库的脚本。

## 导入流程

1. **连接数据库** - 建立 MySQL 数据库连接
2. **导入分类** - 先导入菜系、场景等分类数据
3. **导入食材** - 导入食材库
4. **导入菜谱** - 批量导入菜谱主表
5. **建立关联** - 建立菜谱-食材、菜谱-分类关联
6. **生成数据** - 生成点击量、收藏量等随机数据

## 脚本说明

### import_recipes.py
主要的导入脚本，功能包括：
- 批量插入数据
- 处理外键关联
- 生成模拟统计数据
- 进度显示
- 错误处理

## 使用方法

```bash
# 确保数据库已创建
mysql -u root -p < backend/init.sql

# 运行导入脚本
python import_recipes.py cleaned_data.json
```

## 数据生成规则

- 点击量：100-50000 随机数
- 收藏量：点击量的 5%-20%
- 难度分布：简单 40%、中等 40%、困难 20%

## 性能优化

- 使用批量插入 (bulk_create)
- 关闭自动提交，使用事务
- 分批处理大量数据
