# é£Ÿå ‚ç®¡ç†ç³»ç»Ÿ - æ¶æ„æ–‡æ¡£

> æœ¬æ–‡æ¡£è¯´æ˜é¡¹ç›®æ¶æ„å’Œå„æ–‡ä»¶ä½œç”¨ï¼Œä¾›å¼€å‘è€…ç†è§£ç³»ç»Ÿç»“æ„

---

## é¡¹ç›®æ€»ä½“ç»“æ„

```
canteen-management-system/
â”œâ”€â”€ backend/               # Django åç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ config/           # Django é¡¹ç›®é…ç½®ï¼ˆsettingsã€urlsã€wsgi ç­‰ï¼‰
â”‚   â”œâ”€â”€ accounts/         # ç”¨æˆ·è´¦å·ä¸è®¤è¯æ¨¡å—
â”‚   â”œâ”€â”€ employees/        # å‘˜å·¥æ¡£æ¡ˆç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ schedules/        # æ’ç­ç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ attendance/       # è€ƒå‹¤ç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ leaves/           # è¯·å‡ç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ salaries/         # è–ªèµ„ç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ analytics/        # ç»Ÿè®¡åˆ†ææ¨¡å—
â”‚   â”œâ”€â”€ static/           # é™æ€æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ media/            # ç”¨æˆ·ä¸Šä¼ çš„åª’ä½“æ–‡ä»¶
â”‚   â”œâ”€â”€ manage.py         # Django å‘½ä»¤è¡Œå·¥å…·
â”‚   â””â”€â”€ requirements.txt  # Python ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ frontend/             # Vue 3 å‰ç«¯é¡¹ç›®
â”œâ”€â”€ sql/                  # æ•°æ®åº“åˆå§‹åŒ– SQL æ–‡ä»¶ï¼ˆå‚è€ƒç”¨ï¼‰
â”œâ”€â”€ memory-bank/          # æ–‡æ¡£ä»“åº“
â”‚   â”œâ”€â”€ PRD.md            # äº§å“éœ€æ±‚æ–‡æ¡£
â”‚   â”œâ”€â”€ tech-stack.md     # æŠ€æœ¯æ ˆè¯´æ˜
â”‚   â”œâ”€â”€ IMPLEMENTATION_PLAN.md  # è¯¦ç»†å®æ–½è®¡åˆ’
â”‚   â”œâ”€â”€ progress.md       # å¼€å‘è¿›åº¦è®°å½•
â”‚   â””â”€â”€ architecture.md   # æœ¬æ–‡æ¡£ - æ¶æ„è¯´æ˜
â”œâ”€â”€ .gitignore
â””â”€â”€ CLAUDE.md             # AI å¼€å‘è€…æŒ‡å—
```

---

## åç«¯ Django é¡¹ç›®æ¶æ„

### æ ¸å¿ƒè®¾è®¡åŸåˆ™

1. **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¯ä¸ªåº”ç”¨ï¼ˆappï¼‰å¯¹åº”ä¸€ä¸ªä¸šåŠ¡é¢†åŸŸ
2. **API ä¼˜å…ˆ**ï¼šä½¿ç”¨ Django REST Framework æ„å»º RESTful API
3. **å‰åç«¯åˆ†ç¦»**ï¼šå‰ç«¯ç‹¬ç«‹éƒ¨ç½²ï¼Œé€šè¿‡ CORS ä¸åç«¯é€šä¿¡
4. **ä¸šåŠ¡å±‚åˆ†ç¦»**ï¼šç”¨æˆ·è´¦å·ï¼ˆUserï¼‰ä¸å‘˜å·¥æ¡£æ¡ˆï¼ˆEmployeeProfileï¼‰æ˜¯ä¸¤ä¸ªç‹¬ç«‹æ¦‚å¿µ

### Django åº”ç”¨èŒè´£åˆ’åˆ†

| åº”ç”¨ | èŒè´£ | ä¸»è¦æ¨¡å‹ |
|------|------|---------|
| `config` | Django é¡¹ç›®é…ç½®ã€URL è·¯ç”±ã€WSGI é…ç½® | - |
| `accounts` | ç”¨æˆ·ç™»å½•ã€æ³¨å†Œã€è®¤è¯ | Userï¼ˆç™»å½•è´¦å·ï¼‰ |
| `employees` | å‘˜å·¥æ¡£æ¡ˆç®¡ç†ï¼ˆä¸šåŠ¡ä¿¡æ¯ï¼Œéç™»å½•è´¦å·ï¼‰ | EmployeeProfile |
| `schedules` | æ’ç­è®¡åˆ’ã€ç­æ¬¡å®šä¹‰ã€è°ƒç­ç”³è¯· | Shift, Schedule, ShiftSwapRequest |
| `attendance` | ç­¾åˆ°/ç­¾é€€ã€è€ƒå‹¤è®°å½•ã€å¼‚å¸¸å¤„ç† | AttendanceRecord |
| `leaves` | è¯·å‡ç”³è¯·ã€å®¡æ‰¹æµç¨‹ | LeaveRequest |
| `salaries` | è–ªèµ„è®¡ç®—ã€è–ªèµ„è®°å½•ã€ç”³è¯‰å¤„ç† | SalaryRecord, Appeal |
| `analytics` | æ•°æ®ç»Ÿè®¡ã€æŠ¥è¡¨ç”Ÿæˆ | -ï¼ˆä½¿ç”¨å…¶ä»–åº”ç”¨çš„æ¨¡å‹ï¼‰ |

---

## åº”ç”¨æ¨¡å—è¯¦è§£

### `accounts` - ç”¨æˆ·è´¦å·ä¸è®¤è¯

ç”¨æˆ·è´¦å·ä¸è®¤è¯æ¨¡å—ï¼Œè´Ÿè´£ç³»ç»Ÿç™»å½•ã€æ³¨å†Œå’Œç”¨æˆ·ç®¡ç†ã€‚

#### æ ¸å¿ƒæ¨¡å‹ï¼šUser

```python
class User(models.Model):
    username       # ç™»å½•è´¦å·ï¼ˆå”¯ä¸€ï¼‰
    password       # ç™»å½•å¯†ç ï¼ˆå¼€å‘é˜¶æ®µæ˜æ–‡ï¼‰
    employee_id    # å…³è”å‘˜å·¥æ¡£æ¡ˆIDï¼ˆå¯é€‰å¤–é”®ï¼‰
    role           # è§’è‰²ç±»å‹ï¼šADMIN/EMPLOYEE
    status         # è´¦å·çŠ¶æ€ï¼šENABLED/DISABLED
    created_at     # åˆ›å»ºæ—¶é—´
    updated_at     # æ›´æ–°æ—¶é—´
```

#### æ¶æ„è®¾è®¡è¦ç‚¹

- `employee_id` æ˜¯å¯é€‰å­—æ®µï¼Œå…è®¸ç”¨æˆ·è´¦å·ç‹¬ç«‹äºå‘˜å·¥æ¡£æ¡ˆå­˜åœ¨
- ä½¿ç”¨ Django çš„ `TextChoices` å®šä¹‰æšä¸¾ç±»å‹ï¼Œæä¾›æ›´å¥½çš„ç±»å‹å®‰å…¨
- `verify_password()` ç±»æ–¹æ³•å°è£…è®¤è¯é€»è¾‘ï¼Œä¾¿äºåç»­æ‰©å±•ï¼ˆå¦‚æ·»åŠ å¯†ç å“ˆå¸Œï¼‰

---

### `employees` - å‘˜å·¥æ¡£æ¡ˆç®¡ç†

å‘˜å·¥æ¡£æ¡ˆç®¡ç†æ¨¡å—ï¼Œè´Ÿè´£å‘˜å·¥ä¸šåŠ¡ä¿¡æ¯çš„åˆ›å»ºã€ç»´æŠ¤å’ŒæŸ¥è¯¢ã€‚

#### æ ¸å¿ƒæ¨¡å‹ï¼šEmployeeProfile

```python
class EmployeeProfile(models.Model):
    # åŸºç¡€ä¿¡æ¯
    name                      # å§“å
    gender                    # æ€§åˆ«ï¼šMALE/FEMALE
    phone                     # è”ç³»æ–¹å¼
    id_card                   # èº«ä»½è¯å·ï¼ˆå”¯ä¸€ï¼Œå¯ä¸ºç©ºï¼‰
    address                   # å®¶åº­ä½å€

    # å²—ä½ä¿¡æ¯
    position                  # å²—ä½ï¼šCHEF/PASTRY/PREP/CLEANER/SERVER/MANAGER
    entry_date                # å…¥èŒæ—¶é—´
    status                    # åœ¨èŒçŠ¶æ€ï¼šACTIVE/INACTIVE/LEAVE_WITHOUT_PAY

    # èµ„è´¨è¯ä¹¦
    health_certificate_no         # å¥åº·è¯å·
    health_certificate_expiry     # å¥åº·è¯æœ‰æ•ˆæœŸ
    health_certificate_url        # å¥åº·è¯å›¾ç‰‡åœ°å€
    chef_certificate_level        # å¨å¸ˆç­‰çº§è¯

    # æ—¶é—´æˆ³
    created_at                # åˆ›å»ºæ—¶é—´
    updated_at                # æ›´æ–°æ—¶é—´
```

#### æ¶æ„è®¾è®¡è¦ç‚¹

- ä½¿ç”¨ `TextChoices` å®šä¹‰æšä¸¾ç±»å‹ï¼Œæä¾›ç±»å‹å®‰å…¨å’Œä¸­æ–‡æ ‡ç­¾
- å²—ä½ç±»å‹è¦†ç›–é£Ÿå ‚è¡Œä¸šæ‰€æœ‰å…¸å‹å²—ä½ï¼Œä»å¨å¸ˆåˆ°ä¿æ´å‘˜
- èµ„è´¨è¯ä¹¦å­—æ®µå‡ä¸ºå¯é€‰ï¼Œæ ¹æ®å²—ä½éœ€æ±‚çµæ´»é…ç½®

#### ä¸ User æ¨¡å‹çš„å…³ç³»

| æ–¹é¢ | EmployeeProfile | User |
|------|-----------------|------|
| **ç”¨é€”** | ä¸šåŠ¡å±‚é¢çš„å‘˜å·¥ä¿¡æ¯ | ç³»ç»Ÿç™»å½•è´¦å· |
| **å­˜åœ¨å½¢å¼** | å¯ç‹¬ç«‹å­˜åœ¨ | å¯ç‹¬ç«‹å­˜åœ¨ |
| **å…³è”æ–¹å¼** | é€šè¿‡ `employee_id` å¤–é”®å¯é€‰å…³è” | é€šè¿‡ `employee_id` å¤–é”®å¯é€‰å…³è” |
| **å…¸å‹åœºæ™¯** | æ‰€æœ‰å‘˜å·¥éƒ½éœ€è¦æ¡£æ¡ˆ | åªæœ‰éœ€è¦ç™»å½•ç³»ç»Ÿçš„å‘˜å·¥éœ€è¦è´¦å· |
| **åŒ…å«ä¿¡æ¯** | å§“åã€å²—ä½ã€å¥åº·è¯ç­‰ä¸šåŠ¡æ•°æ® | ç”¨æˆ·åã€å¯†ç ã€è§’è‰²ç­‰è®¤è¯æ•°æ® |

---

### `schedules` - æ’ç­ç®¡ç†

æ’ç­ç®¡ç†æ¨¡å—ï¼Œè´Ÿè´£ç­æ¬¡å®šä¹‰ã€æ’ç­è®¡åˆ’å’Œè°ƒç­ç”³è¯·ç®¡ç†ã€‚

#### æ ¸å¿ƒæ¨¡å‹

**Shift** - ç­æ¬¡å®šä¹‰
```python
class Shift(models.Model):
    name                    # ç­æ¬¡åç§°ï¼ˆå¦‚ï¼šæ—©ç­/ä¸­ç­/æ™šç­ï¼‰
    start_time              # ä¸Šç­å¼€å§‹æ—¶é—´
    end_time                # ä¸‹ç­ç»“æŸæ—¶é—´
    created_at              # åˆ›å»ºæ—¶é—´
```

**Schedule** - æ’ç­è®¡åˆ’
```python
class Schedule(models.Model):
    employee                # å‘˜å·¥ï¼ˆå¤–é”® -> EmployeeProfileï¼‰
    shift                   # ç­æ¬¡ï¼ˆå¤–é”® -> Shiftï¼‰
    work_date               # æ’ç­æ—¥æœŸï¼ˆå”¯ä¸€çº¦æŸï¼šå‘˜å·¥ + æ—¥æœŸï¼‰
    is_swapped              # æ˜¯å¦å·²è°ƒç­
    created_at              # åˆ›å»ºæ—¶é—´
```

**ShiftSwapRequest** - è°ƒç­ç”³è¯·
```python
class ShiftSwapRequest(models.Model):
    requester               # å‘èµ·å‘˜å·¥ï¼ˆå¤–é”® -> EmployeeProfileï¼‰
    original_schedule       # åŸå®šæ’ç­ï¼ˆå¤–é”® -> Scheduleï¼‰
    target_date             # æœŸæœ›è°ƒæ•´æ—¥æœŸ
    target_shift            # æœŸæœ›è°ƒæ•´ç­æ¬¡ï¼ˆå¤–é”® -> Shiftï¼‰
    reason                  # ç”³è¯·åŸå› 
    status                  # å®¡æ‰¹çŠ¶æ€ï¼šPENDING/APPROVED/REJECTED
    approver                # å®¡æ‰¹ç®¡ç†å‘˜ï¼ˆå¤–é”® -> EmployeeProfileï¼Œå¯é€‰ï¼‰
    approval_remark         # å®¡æ‰¹æ„è§
    created_at              # åˆ›å»ºæ—¶é—´
```

#### æ¶æ„è®¾è®¡è¦ç‚¹

- ä½¿ç”¨ `unique_together = [['employee', 'work_date']]` é˜²æ­¢åŒä¸€å‘˜å·¥åœ¨åŒä¸€æ—¥æœŸé‡å¤æ’ç­
- `is_swapped` æ ‡è®°ç”¨äºè·Ÿè¸ªè°ƒç­å†å²
- è°ƒç­å®¡æ ¸é€šè¿‡åï¼Œç³»ç»Ÿè‡ªåŠ¨æ›´æ–°æ’ç­è®°å½•ï¼ˆåˆ é™¤åŸæ’ç­ï¼Œåˆ›å»ºæ–°æ’ç­ï¼‰

---

### `attendance` - è€ƒå‹¤ç®¡ç†

è€ƒå‹¤ç®¡ç†æ¨¡å—ï¼Œè´Ÿè´£å‘˜å·¥ç­¾åˆ°/ç­¾é€€ã€è€ƒå‹¤è®°å½•å’Œå¼‚å¸¸å¤„ç†ã€‚

#### æ ¸å¿ƒæ¨¡å‹ï¼šAttendanceRecord

```python
class AttendanceRecord(models.Model):
    # å…³è”ä¿¡æ¯
    employee                # å‘˜å·¥ï¼ˆå¤–é”® -> EmployeeProfileï¼‰
    schedule                # æ’ç­ï¼ˆå¤–é”® -> Scheduleï¼Œå¯é€‰ï¼‰

    # ç­¾åˆ°ä¿¡æ¯
    clock_in_time           # ç­¾åˆ°æ—¶é—´ï¼ˆå¯ä¸ºç©ºï¼‰
    clock_in_location       # ç­¾åˆ°åœ°ç‚¹

    # ç­¾é€€ä¿¡æ¯
    clock_out_time          # ç­¾é€€æ—¶é—´ï¼ˆå¯ä¸ºç©ºï¼‰
    clock_out_location      # ç­¾é€€åœ°ç‚¹

    # è€ƒå‹¤çŠ¶æ€
    status                  # è€ƒå‹¤çŠ¶æ€ï¼šNORMAL/LATE/EARLY_LEAVE/MISSING/ABNORMAL

    # å¼‚å¸¸å¤„ç†
    correction_remark       # æ›´æ­£å¤‡æ³¨

    # æ—¶é—´æˆ³
    created_at              # åˆ›å»ºæ—¶é—´
    updated_at              # æ›´æ–°æ—¶é—´
```

#### è€ƒå‹¤çŠ¶æ€åˆ¤æ–­è§„åˆ™

- **æ— ç­¾åˆ°æˆ–æ— ç­¾é€€è®°å½•** â†’ MISSINGï¼ˆç¼ºå¡ï¼‰
- **ç­¾åˆ°æ—¶é—´ > ç­æ¬¡å¼€å§‹æ—¶é—´ + 5åˆ†é’Ÿ** â†’ LATEï¼ˆè¿Ÿåˆ°ï¼‰
- **ç­¾é€€æ—¶é—´ < ç­æ¬¡ç»“æŸæ—¶é—´ - 5åˆ†é’Ÿ** â†’ EARLY_LEAVEï¼ˆæ—©é€€ï¼‰
- **å…¶ä»–** â†’ NORMALï¼ˆæ­£å¸¸ï¼‰

**å¼¹æ€§æ—¶é—´**ï¼š5åˆ†é’Ÿå†…ç­¾åˆ°/ç­¾é€€ä¸ç®—è¿Ÿåˆ°/æ—©é€€

---

### `leaves` - è¯·å‡ç®¡ç†

è¯·å‡ç®¡ç†æ¨¡å—ï¼Œè´Ÿè´£å‘˜å·¥è¯·å‡ç”³è¯·ã€å®¡æ‰¹æµç¨‹ç®¡ç†ã€‚

#### æ ¸å¿ƒæ¨¡å‹ï¼šLeaveRequest

```python
class LeaveRequest(models.Model):
    # åŸºæœ¬ä¿¡æ¯å­—æ®µ
    employee                # å‘˜å·¥ï¼ˆå¤–é”® -> EmployeeProfileï¼‰
    leave_type              # è¯·å‡ç±»å‹ï¼šSICK/PERSONAL/COMPENSATORY
    start_time              # å¼€å§‹æ—¶é—´
    end_time                # ç»“æŸæ—¶é—´
    reason                  # è¯·å‡åŸå› 

    # å®¡æ‰¹ä¿¡æ¯å­—æ®µ
    status                  # å®¡æ‰¹çŠ¶æ€ï¼šPENDING/APPROVED/REJECTED
    approver                # å®¡æ‰¹äººï¼ˆå¤–é”® -> EmployeeProfileï¼Œå¯é€‰ï¼‰
    approval_remark         # å®¡æ‰¹æ„è§

    # æ—¶é—´æˆ³
    created_at              # åˆ›å»ºæ—¶é—´
    updated_at              # æ›´æ–°æ—¶é—´
```

#### æ¶æ„è®¾è®¡è¦ç‚¹

- ä½¿ç”¨ `TextChoices` å®šä¹‰æšä¸¾ç±»å‹ï¼Œæä¾›ç±»å‹å®‰å…¨å’Œä¸­æ–‡æ ‡ç­¾
- `approver` å¤–é”®ä¸ºå¯é€‰ï¼Œå…è®¸ç³»ç»Ÿè‡ªåŠ¨å®¡æ‰¹ï¼ˆå¦‚éœ€è¦ï¼‰
- å®¡æ‰¹çŠ¶æ€é»˜è®¤ä¸º PENDINGï¼ˆå¾…å®¡æ‰¹ï¼‰

---

### `salaries` - è–ªèµ„ç®¡ç†

è–ªèµ„ç®¡ç†æ¨¡å—ï¼Œè´Ÿè´£è–ªèµ„è®¡ç®—ã€è–ªèµ„è®°å½•ç”Ÿæˆã€å¼‚å¸¸ç”³è¯‰å¤„ç†ã€‚

#### æ ¸å¿ƒæ¨¡å‹

**SalaryRecord** - è–ªèµ„è®°å½•
```python
class SalaryRecord(models.Model):
    # åŸºæœ¬ä¿¡æ¯å­—æ®µ
    employee                # å‘˜å·¥ï¼ˆå¤–é”® -> EmployeeProfileï¼‰
    year_month              # å¹´æœˆï¼ˆæ ¼å¼ï¼šYYYY-MMï¼‰

    # è–ªèµ„ç»„æˆå­—æ®µ
    base_salary             # åŸºæœ¬å·¥èµ„
    position_allowance      # å²—ä½æ´¥è´´
    overtime_pay            # åŠ ç­è´¹
    deductions              # æ‰£æ¬¾
    total_salary            # å®å‘å·¥èµ„ï¼ˆè‡ªåŠ¨è®¡ç®—ï¼‰

    # ç»Ÿè®¡å­—æ®µ
    work_days               # å‡ºå‹¤å¤©æ•°
    late_count              # è¿Ÿåˆ°æ¬¡æ•°
    missing_count           # ç¼ºå¡æ¬¡æ•°
    overtime_hours          # åŠ ç­æ—¶é•¿ï¼ˆå°æ—¶ï¼‰

    # çŠ¶æ€å’Œå¤‡æ³¨
    status                  # çŠ¶æ€ï¼šDRAFT/PUBLISHED/APPEALED/ADJUSTED
    remark                  # å¤‡æ³¨

    # æ—¶é—´æˆ³
    created_at              # åˆ›å»ºæ—¶é—´
    updated_at              # æ›´æ–°æ—¶é—´
```

**Appeal** - å¼‚å¸¸ç”³è¯‰
```python
class Appeal(models.Model):
    # åŸºæœ¬ä¿¡æ¯å­—æ®µ
    appeal_type             # ç”³è¯‰ç±»å‹ï¼šATTENDANCE/SALARY
    employee                # ç”³è¯‰å‘˜å·¥ï¼ˆå¤–é”® -> EmployeeProfileï¼‰
    target_id               # ç›®æ ‡è®°å½•IDï¼ˆè€ƒå‹¤è®°å½•IDæˆ–è–ªèµ„è®°å½•IDï¼‰

    # ç”³è¯‰ä¿¡æ¯
    reason                  # ç”³è¯‰åŸå› 

    # å®¡æ‰¹ä¿¡æ¯
    status                  # å®¡æ‰¹çŠ¶æ€ï¼šPENDING/APPROVED/REJECTED
    approver                # å®¡æ‰¹äººï¼ˆå¤–é”® -> EmployeeProfileï¼Œå¯é€‰ï¼‰
    approval_remark         # å®¡æ‰¹æ„è§

    # æ—¶é—´æˆ³
    created_at              # åˆ›å»ºæ—¶é—´
    updated_at              # æ›´æ–°æ—¶é—´
```

#### è–ªèµ„è®¡ç®—è§„åˆ™

| é¡¹ç›® | è®¡ç®—å…¬å¼ | è¯´æ˜ |
|------|---------|------|
| æ—¥å·¥èµ„ | æœˆè–ª Ã· 21.75 | å›ºå®šå·¥ä½œæ—¥21.75å¤© |
| æ—¶è–ª | æ—¥å·¥èµ„ Ã· 8 | æ¯æ—¥å·¥ä½œ8å°æ—¶ |
| åŠ ç­è´¹ | æ—¶è–ª Ã— 1.5 Ã— åŠ ç­å°æ—¶æ•° | åŠ ç­æŒ‰1.5å€è®¡ç®— |
| è¿Ÿåˆ°æ‰£æ¬¾ | 20 å…ƒ Ã— è¿Ÿåˆ°æ¬¡æ•° | æ¯æ¬¡è¿Ÿåˆ°æ‰£20å…ƒ |
| ç¼ºå¡æ‰£æ¬¾ | 50 å…ƒ Ã— ç¼ºå¡æ¬¡æ•° | æ¯æ¬¡ç¼ºå¡æ‰£50å…ƒ |
| å²—ä½æ´¥è´´ | å›ºå®šé‡‘é¢ | CHEF(800)ã€PASTRY(700)ã€PREP(500)ã€CLEANER(300)ã€SERVER(400)ã€MANAGER(1000) |
| å®å‘å·¥èµ„ | åŸºæœ¬å·¥èµ„ + å²—ä½æ´¥è´´ + åŠ ç­è´¹ - æ‰£æ¬¾ | è‡ªåŠ¨è®¡ç®— |

---

### `analytics` - ç»Ÿè®¡åˆ†æ

ç»Ÿè®¡åˆ†ææ¨¡å—ï¼Œè´Ÿè´£è·¨æ¨¡å—çš„æ•°æ®èšåˆå’ŒæŠ¥è¡¨ç”Ÿæˆã€‚

#### æ¶æ„è®¾è®¡è¦ç‚¹

- **æ— æ¨¡å‹è®¾è®¡**ï¼š`analytics` åº”ç”¨æ²¡æœ‰è‡ªå·±çš„æ•°æ®æ¨¡å‹ï¼Œç›´æ¥ä½¿ç”¨å…¶ä»–åº”ç”¨çš„æ¨¡å‹è¿›è¡Œæ•°æ®èšåˆ
- **è§†å›¾å‡½æ•°è€Œé ViewSet**ï¼šä½¿ç”¨ `@api_view` è£…é¥°å™¨å®šä¹‰è§†å›¾å‡½æ•°ï¼Œæ¯ä¸ªæ¥å£å¯¹åº”ä¸€ä¸ªç»Ÿè®¡ç»´åº¦
- **æ•°æ®æ ¼å¼ä¸“ä¸º ECharts ä¼˜åŒ–**ï¼šå‰ç«¯æ— éœ€å¤æ‚çš„æ•°æ®è½¬æ¢

#### ç»Ÿè®¡ç»´åº¦

**äººå‘˜ç»Ÿè®¡** (`employee_statistics`)
- æ€»äººæ•°ã€å²—ä½åˆ†å¸ƒã€æŒè¯ç‡ã€å…¥èŒçŠ¶æ€åˆ†å¸ƒ

**è€ƒå‹¤ç»Ÿè®¡** (`attendance_statistics`)
- å‡ºå‹¤ç‡ã€çŠ¶æ€åˆ†å¸ƒã€æ—¥æœŸè¶‹åŠ¿ã€å²—ä½ç»´åº¦

**è–ªèµ„ç»Ÿè®¡** (`salary_statistics`)
- æœˆåº¦è¶‹åŠ¿ã€å²—ä½å¯¹æ¯”ã€è–ªèµ„æ„æˆ

**æ€»è§ˆç»Ÿè®¡** (`overview_statistics`)
- ä»Šæ—¥æ¦‚è§ˆã€å¾…åŠäº‹é¡¹ã€æ€»è§ˆç»Ÿè®¡ã€æœ¬æœˆè€ƒå‹¤

---

## æ•°æ®åº“è®¾è®¡åŸåˆ™

### æ ¸å¿ƒä¸šåŠ¡æ¦‚å¿µ

1. **User vs EmployeeProfile**
   - `User`ï¼šç³»ç»Ÿç™»å½•è´¦å·ï¼ˆå­˜åœ¨äº `accounts` åº”ç”¨ï¼‰
   - `EmployeeProfile`ï¼šå‘˜å·¥ä¸šåŠ¡æ¡£æ¡ˆï¼ˆå­˜åœ¨äº `employees` åº”ç”¨ï¼‰
   - ä¸¤è€…é€šè¿‡ `employee_id` å¤–é”®å…³è”ï¼ˆå¯é€‰ï¼‰
   - å¹¶éæ‰€æœ‰å‘˜å·¥éƒ½éœ€è¦ç™»å½•è´¦å·

2. **æ’ç­ â†’ è€ƒå‹¤ â†’ è–ªèµ„** æ•°æ®æµ
   - æ’ç­ï¼ˆ`schedules`ï¼‰å®šä¹‰å‘˜å·¥çš„å·¥ä½œç­æ¬¡
   - è€ƒå‹¤ï¼ˆ`attendance`ï¼‰è®°å½•å‘˜å·¥çš„å®é™…ç­¾åˆ°/ç­¾é€€
   - è–ªèµ„ï¼ˆ`salaries`ï¼‰æ ¹æ®è€ƒå‹¤æ•°æ®è®¡ç®—å·¥èµ„

---

## å‰ç«¯ Vue 3 é¡¹ç›®æ¶æ„

### é¡¹ç›®ç»“æ„

```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”œâ”€â”€ admin/       # ç®¡ç†å‘˜ç«¯é¡µé¢
â”‚   â”‚   â”œâ”€â”€ employee/    # å‘˜å·¥ç«¯é¡µé¢
â”‚   â”‚   â””â”€â”€ auth/        # ç™»å½•/æ³¨å†Œé¡µé¢
â”‚   â”œâ”€â”€ components/      # å…¬å…±ç»„ä»¶
â”‚   â”œâ”€â”€ api/             # API è¯·æ±‚å°è£…
â”‚   â”œâ”€â”€ router/          # Vue Router é…ç½®
â”‚   â”œâ”€â”€ stores/          # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ assets/          # é™æ€èµ„æºï¼ˆå›¾ç‰‡ã€æ ·å¼ç­‰ï¼‰
â”‚   â”œâ”€â”€ App.vue          # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.js          # åº”ç”¨å…¥å£
â”œâ”€â”€ public/              # å…¬å…±é™æ€æ–‡ä»¶
â”œâ”€â”€ index.html           # HTML æ¨¡æ¿
â”œâ”€â”€ package.json         # é¡¹ç›®ä¾èµ–å’Œè„šæœ¬
â”œâ”€â”€ vite.config.js       # Vite é…ç½®
â””â”€â”€ README.md            # é¡¹ç›®è¯´æ˜
```

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Vue** | ^3.5.24 | æ ¸å¿ƒæ¡†æ¶ï¼Œä½¿ç”¨ Composition API |
| **Vite** | ^7.2.4 | æ„å»ºå·¥å…· |
| **Element Plus** | ^2.13.1 | UI ç»„ä»¶åº“ |
| **ECharts** | ^6.0.0 | æ•°æ®å¯è§†åŒ– |
| **Axios** | ^1.13.3 | HTTP å®¢æˆ·ç«¯ |
| **Vue Router** | ^4.6.4 | è·¯ç”±ç®¡ç† |
| **Pinia** | ^3.0.4 | çŠ¶æ€ç®¡ç† |

### ç›®å½•èŒè´£è¯´æ˜

#### `src/views/` - é¡µé¢è§†å›¾ç»„ä»¶

- **admin/** - ç®¡ç†å‘˜ç«¯é¡µé¢
  - `DashboardView.vue` - ç®¡ç†å‘˜é¦–é¡µ/ä»ªè¡¨æ¿
  - `EmployeeManageView.vue` - äººå‘˜æ¡£æ¡ˆç®¡ç†
  - `ScheduleManageView.vue` - æ’ç­å®‰æ’ç®¡ç†
  - `AttendanceManageView.vue` - è€ƒå‹¤è®°å½•ç®¡ç†
  - `LeaveApproveView.vue` - è¯·å‡å®¡æ‰¹ç®¡ç†
  - `SalaryManageView.vue` - è–ªèµ„ä¿¡æ¯ç®¡ç†
  - `StatisticsView.vue` - ç»¼åˆç»Ÿè®¡åˆ†æ
  - `SystemManageView.vue` - ç³»ç»Ÿç®¡ç†

- **employee/** - å‘˜å·¥ç«¯é¡µé¢
  - `HomeView.vue` - å‘˜å·¥ç«¯é¦–é¡µ
  - `ProfileView.vue` - ä¸ªäººä¿¡æ¯ä¸­å¿ƒ
  - `CheckInView.vue` - ç­¾åˆ°æœåŠ¡é¡µé¢
  - `AttendanceView.vue` - è€ƒå‹¤ä¿¡æ¯æŸ¥è¯¢
  - `LeaveView.vue` - è¯·å‡ç”³è¯·æœåŠ¡
  - `ShiftSwapView.vue` - è°ƒç­ç”³è¯·æœåŠ¡
  - `SalaryView.vue` - è–ªèµ„ä¿¡æ¯æŸ¥è¯¢

- **auth/** - è®¤è¯ç›¸å…³é¡µé¢
  - `LoginView.vue` - ç™»å½•é¡µé¢
  - `RegisterView.vue` - æ³¨å†Œé¡µé¢

#### `src/components/` - å…¬å…±ç»„ä»¶

å¯å¤ç”¨çš„ Vue ç»„ä»¶ï¼Œå¦‚æ•°æ®è¡¨æ ¼ã€è¡¨å•ã€å›¾è¡¨ã€å¸ƒå±€ç»„ä»¶ç­‰ã€‚

#### `src/api/` - API è¯·æ±‚å°è£…

æ¯ä¸ªæ–‡ä»¶å°è£…ä¸€ä¸ªä¸šåŠ¡æ¨¡å—çš„ API è¯·æ±‚æ–¹æ³•ï¼ŒåŸºäºç»Ÿä¸€çš„ `request.js` Axios å®ä¾‹ã€‚

- `request.js` - Axios å®ä¾‹é…ç½®ï¼Œè¯·æ±‚/å“åº”æ‹¦æˆªå™¨ï¼Œ401 è‡ªåŠ¨è·³è½¬ç™»å½•
- `auth.js` - è®¤è¯ç›¸å…³ APIï¼ˆç™»å½•ã€æ³¨å†Œã€ç”¨æˆ·åˆ—è¡¨ï¼‰
- `employee.js` - å‘˜å·¥æ¡£æ¡ˆ APIï¼ˆCRUDã€ç­›é€‰ã€æœç´¢ï¼‰
- `schedule.js` - æ’ç­ç®¡ç† APIï¼ˆç­æ¬¡ã€æ’ç­ã€è°ƒç­ç”³è¯·ã€æ—¥å†è§†å›¾ã€æ‰¹é‡æ’ç­ï¼‰
- `attendance.js` - è€ƒå‹¤ç®¡ç† APIï¼ˆç­¾åˆ°ã€ç­¾é€€ã€ç»Ÿè®¡ã€æ›´æ­£ã€æˆ‘çš„è€ƒå‹¤ï¼‰
- `leave.js` - è¯·å‡ç®¡ç† APIï¼ˆè¯·å‡ç”³è¯·ã€å®¡æ‰¹ã€æˆ‘çš„è¯·å‡ã€å¾…å®¡æ‰¹åˆ—è¡¨ï¼‰
- `salary.js` - è–ªèµ„ç®¡ç† APIï¼ˆè–ªèµ„åˆ—è¡¨/è¯¦æƒ…/ç”Ÿæˆ/è°ƒæ•´/å‘å¸ƒ/åˆ é™¤ã€ç”³è¯‰åˆ—è¡¨/å®¡æ‰¹ï¼‰
- `analytics.js` - ç»Ÿè®¡åˆ†æ APIï¼ˆäººå‘˜ç»Ÿè®¡ã€è€ƒå‹¤ç»Ÿè®¡ã€è–ªèµ„ç»Ÿè®¡ã€æ€»è§ˆç»Ÿè®¡ï¼‰

**`salary.js` è–ªèµ„ API æ–‡ä»¶è¯´æ˜**ï¼š
```
getSalaryList(params)        # è·å–è–ªèµ„åˆ—è¡¨ï¼Œæ”¯æŒæœˆä»½ã€å‘˜å·¥ã€çŠ¶æ€ç­›é€‰å’Œåˆ†é¡µ
getSalaryDetail(id)          # è·å–è–ªèµ„è¯¦æƒ…
createSalary(data)           # åˆ›å»ºè–ªèµ„è®°å½•
updateSalary(id, data)       # æ›´æ–°è–ªèµ„è®°å½•
generateSalary(data)         # ç”Ÿæˆè–ªèµ„ï¼ˆæ ¹æ®è€ƒå‹¤è‡ªåŠ¨è®¡ç®—ï¼‰
adjustSalary(id, data)       # è°ƒæ•´è–ªèµ„ï¼ˆæ‰‹åŠ¨ä¿®æ”¹åŸºæœ¬å·¥èµ„ã€åŠ ç­è´¹ç­‰ï¼‰
publishSalary(id)            # å‘å¸ƒè–ªèµ„ï¼ˆçŠ¶æ€ä»è‰ç¨¿æ”¹ä¸ºå·²å‘å¸ƒï¼‰
deleteSalary(id)             # åˆ é™¤è–ªèµ„è®°å½•

# ç”³è¯‰ç›¸å…³
getAppealList(params)        # è·å–ç”³è¯‰åˆ—è¡¨
getAppealDetail(id)          # è·å–ç”³è¯‰è¯¦æƒ…
createAppeal(data)           # åˆ›å»ºç”³è¯‰
approveAppeal(id, data)      # å®¡æ‰¹ç”³è¯‰
getPendingAppeals(params)    # è·å–å¾…å®¡æ‰¹ç”³è¯‰åˆ—è¡¨
exportSalarySheet(params)    # å¯¼å‡ºå·¥èµ„è¡¨
```

#### `src/router/` - è·¯ç”±é…ç½®

**è·¯ç”±å¯¼èˆªå®ˆå«åŠŸèƒ½**ï¼š
- æ£€æŸ¥è·¯ç”±æ˜¯å¦éœ€è¦è®¤è¯
- æ£€æŸ¥ç”¨æˆ·è§’è‰²æƒé™
- è§’è‰²ä¸åŒ¹é…æ—¶ï¼Œè‡ªåŠ¨è·³è½¬åˆ°å¯¹åº”è§’è‰²çš„é¦–é¡µ

#### `src/stores/` - Pinia çŠ¶æ€ç®¡ç†

**`user.js`** - ç”¨æˆ·çŠ¶æ€ç®¡ç†
- çŠ¶æ€å­—æ®µï¼š`token`ã€`userInfo`
- æ“ä½œæ–¹æ³•ï¼š`login()`ã€`logout()`ã€`updateUserInfo()`

### UI ä¸»é¢˜è®¾è®¡

#### é…è‰²æ–¹æ¡ˆ

| ç”¨é€” | è‰²å€¼ | è¯´æ˜ |
|------|------|------|
| **ä¸»è‰²** | `#FF6B35` | æ©™è‰²ï¼Œä½“ç°é£Ÿå ‚æ¸©æš–æ°›å›´ |
| **è¾…åŠ©è‰²1** | `#F7C52D` | é»„è‰²ï¼Œç”¨äºé«˜äº®å’Œæç¤º |
| **è¾…åŠ©è‰²2** | `#4CAF50` | ç»¿è‰²ï¼Œç”¨äºæˆåŠŸçŠ¶æ€ |
| **èƒŒæ™¯è‰²** | `#FFF8F0` | æµ…ç±³è‰²ï¼Œè¥é€ æ¸©é¦¨æ„Ÿ |
| **æ–‡å­—è‰²** | `#333333` | æ·±ç°ï¼Œä¿è¯å¯è¯»æ€§ |

#### è®¾è®¡å…ƒç´ 

- **å›¾æ ‡**ï¼šé¤å…·ï¼ˆåˆ€å‰ã€å‹ºå­ï¼‰ã€å¨å¸ˆå¸½ã€é£Ÿæç­‰é£Ÿå ‚ç›¸å…³å…ƒç´ 
- **å­—ä½“**ï¼šæ¸…æ™°æ˜“è¯»ï¼Œè€ƒè™‘éƒ¨åˆ†å‘˜å·¥å¹´é¾„åå¤§ï¼Œé€‚åº¦æ”¾å¤§
- **åœ†è§’**ï¼š8px åœ†è§’ï¼Œè¥é€ äº²å’Œæ„Ÿ
- **é—´è·**ï¼šç»Ÿä¸€çš„ 16px é—´è·è§„åˆ™

---

## é‡è¦æ–‡ä»¶è¯´æ˜

### `backend/config/settings.py`

Django é¡¹ç›®çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼ŒåŒ…å«ï¼š

- **INSTALLED_APPS**ï¼šæ³¨å†Œæ‰€æœ‰åº”ç”¨å’Œç¬¬ä¸‰æ–¹åº“
- **DATABASES**ï¼šæ•°æ®åº“è¿æ¥é…ç½®ï¼ˆMySQLï¼‰
- **MIDDLEWARE**ï¼šä¸­é—´ä»¶é…ç½®ï¼ˆåŒ…å« CORSï¼‰
- **CORS_ALLOWED_ORIGINS**ï¼šå…è®¸è·¨åŸŸè®¿é—®çš„å‰ç«¯åœ°å€
- **STATIC_URL/MEDIA_URL**ï¼šé™æ€æ–‡ä»¶å’Œåª’ä½“æ–‡ä»¶è·¯å¾„é…ç½®

### `backend/config/urls.py`

URL è·¯ç”±é…ç½®ï¼Œå°†å„åº”ç”¨çš„ URL è·¯ç”±åŒ…å«è¿›æ¥ï¼š
- `/admin/` - Django ç®¡ç†åå°
- `/api/accounts/` - ç”¨æˆ·è´¦å·ä¸è®¤è¯ API
- `/api/employees/` - å‘˜å·¥æ¡£æ¡ˆ API
- `/api/schedules/` - æ’ç­ç®¡ç† API
- `/api/attendance/` - è€ƒå‹¤ç®¡ç† API
- `/api/leaves/` - è¯·å‡ç®¡ç† API
- `/api/salaries/` - è–ªèµ„ç®¡ç† API
- `/api/analytics/` - ç»Ÿè®¡åˆ†æ API

### `backend/requirements.txt`

Python ä¾èµ–åˆ—è¡¨ï¼ŒåŒ…å«ï¼š
- `django>=5.2` - Django æ¡†æ¶
- `djangorestframework` - REST API æ¡†æ¶
- `mysqlclient` - MySQL æ•°æ®åº“é©±åŠ¨
- `django-cors-headers` - è·¨åŸŸè¯·æ±‚å¤„ç†
- `django-filter` - æŸ¥è¯¢è¿‡æ»¤åŠŸèƒ½

### `backend/manage.py`

Django å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºï¼š
- `python manage.py runserver` - å¯åŠ¨å¼€å‘æœåŠ¡å™¨
- `python manage.py makemigrations` - åˆ›å»ºæ•°æ®åº“è¿ç§»æ–‡ä»¶
- `python manage.py migrate` - åº”ç”¨æ•°æ®åº“è¿ç§»
- `python manage.py createsuperuser` - åˆ›å»ºè¶…çº§ç®¡ç†å‘˜

### `frontend/vite.config.js`

Vite æ„å»ºå·¥å…·çš„é…ç½®æ–‡ä»¶ï¼š
- **proxy**ï¼šå°†å‰ç«¯ `/api` è¯·æ±‚ä»£ç†åˆ°åç«¯ `http://127.0.0.1:8000`
- **plugins**ï¼šæ³¨å†Œ Vue 3 æ’ä»¶

### `frontend/package.json`

é¡¹ç›®ä¾èµ–å’Œè„šæœ¬é…ç½®ï¼š
- `npm run dev` - å¯åŠ¨å¼€å‘æœåŠ¡å™¨
- `npm run build` - æ„å»ºç”Ÿäº§ç‰ˆæœ¬
- `npm run preview` - é¢„è§ˆç”Ÿäº§æ„å»º

---

## å¼€å‘å·¥ä½œæµ

1. **ä¿®æ”¹æ¨¡å‹**ï¼šåœ¨å¯¹åº”åº”ç”¨çš„ `models.py` ä¸­å®šä¹‰æˆ–ä¿®æ”¹æ•°æ®æ¨¡å‹
2. **åˆ›å»ºè¿ç§»**ï¼š`python manage.py makemigrations`
3. **åº”ç”¨è¿ç§»**ï¼š`python manage.py migrate`
4. **åˆ›å»ºåºåˆ—åŒ–å™¨**ï¼šåœ¨ `serializers.py` ä¸­å®šä¹‰ API åºåˆ—åŒ–å™¨
5. **åˆ›å»ºè§†å›¾**ï¼šåœ¨ `views.py` ä¸­å®ç° API ç«¯ç‚¹
6. **é…ç½®è·¯ç”±**ï¼šåœ¨åº”ç”¨çš„ `urls.py` ä¸­é…ç½® URL è·¯ç”±
7. **æµ‹è¯•éªŒè¯**ï¼šä½¿ç”¨ Postman æˆ– curl æµ‹è¯• API

---

## æ³¨æ„äº‹é¡¹

1. **statistics åº”ç”¨åç§°å†²çª**ï¼šPython å†…ç½®äº† `statistics` æ¨¡å—ï¼Œå› æ­¤è¯¥åº”ç”¨å‘½åä¸º `analytics`
2. **æ•°æ®åº“è¿ç§»**ï¼šå§‹ç»ˆä½¿ç”¨ Django migrationsï¼Œä¸è¦ç›´æ¥æ‰§è¡Œ SQL
3. **å¯†ç å­˜å‚¨**ï¼šå¼€å‘é˜¶æ®µé‡‡ç”¨æ˜æ–‡å­˜å‚¨ï¼Œç”Ÿäº§ç¯å¢ƒéœ€æ”¹ä¸ºåŠ å¯†å­˜å‚¨
4. **CORS é…ç½®**ï¼šå‰ç«¯å¼€å‘æ—¶éœ€è¦é…ç½® CORS å…è®¸è·¨åŸŸè¯·æ±‚
5. **API ä»£ç†**ï¼šå‰ç«¯ `/api` è¯·æ±‚é€šè¿‡ Vite ä»£ç†è½¬å‘åˆ°åç«¯ï¼Œç”Ÿäº§ç¯å¢ƒéœ€é…ç½® Nginx åå‘ä»£ç†
6. **å‰ç«¯è·¯ç”±**ï¼šä½¿ç”¨ Vue Router çš„ Hash æ¨¡å¼æˆ– History æ¨¡å¼ï¼ˆéœ€æœåŠ¡å™¨é…ç½®æ”¯æŒï¼‰

---

## å‰ç«¯é¡µé¢ç»„ä»¶è¯¦è§£

### `SalaryManageView.vue` - è–ªèµ„ä¿¡æ¯ç®¡ç†é¡µé¢

è–ªèµ„ç®¡ç†æ˜¯ç®¡ç†å‘˜ç«¯çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œè´Ÿè´£å‘˜å·¥è–ªèµ„çš„ç”Ÿæˆã€æŸ¥çœ‹ã€è°ƒæ•´å’Œå‘å¸ƒã€‚

#### é¡µé¢ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é¡µé¢æ ‡é¢˜: ğŸ’° è–ªèµ„ç®¡ç†                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ“ä½œæ : [æœˆä»½é€‰æ‹©å™¨] [ç”Ÿæˆè–ªèµ„] [å¯¼å‡ºå·¥èµ„è¡¨]                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç»Ÿè®¡å¡ç‰‡: ğŸ’µæœ¬æœˆè–ªèµ„æ€»é¢  ğŸ“ˆå¹³å‡è–ªèµ„  ğŸ“å¾…å‘å¸ƒ  âš ï¸å¾…å¤„ç†ç”³è¯‰   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è–ªèµ„åˆ—è¡¨è¡¨æ ¼:                                             â”‚
â”‚ | å‘˜å·¥ | å²—ä½ | æœˆä»½ | åŸºæœ¬ | æ´¥è´´ | åŠ ç­ | æ‰£æ¬¾ | å®å‘ | çŠ¶æ€ | æ“ä½œ | â”‚
â”‚ | å¼ ä¸‰ | å¨å¸ˆ | 2024-01 | Â¥3000 | Â¥800 | Â¥500 | Â¥20 | Â¥4280 | è‰ç¨¿ | è¯¦æƒ… è°ƒæ•´ å‘å¸ƒ åˆ é™¤ | â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åˆ†é¡µ: æ€»å…± 50 æ¡, æ¯é¡µ 20 æ¡ [1] 2 3                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

**1. æœˆä»½ç­›é€‰ä¸è–ªèµ„ç”Ÿæˆ**
- é»˜è®¤æ˜¾ç¤ºå½“å‰æœˆä»½çš„è–ªèµ„æ•°æ®
- é€‰æ‹©æœˆä»½åè‡ªåŠ¨åˆ·æ–°åˆ—è¡¨
- "ç”Ÿæˆè–ªèµ„"æŒ‰é’®è§¦å‘æ‰¹é‡è®¡ç®—ï¼ŒåŸºäºè€ƒå‹¤æ•°æ®è‡ªåŠ¨ç”Ÿæˆæ‰€æœ‰å‘˜å·¥çš„è–ªèµ„è®°å½•

**2. ç»Ÿè®¡å¡ç‰‡åŒºåŸŸ**
å››ä¸ªæ¸å˜å¡ç‰‡æ˜¾ç¤ºæœ¬æœˆè–ªèµ„æ¦‚å†µï¼š
- **æœ¬æœˆè–ªèµ„æ€»é¢**ï¼ˆæ©™é»„æ¸å˜ï¼‰- æ‰€æœ‰å‘˜å·¥å®å‘å·¥èµ„æ€»å’Œ
- **å¹³å‡è–ªèµ„**ï¼ˆé»„ç»¿æ¸å˜ï¼‰- äººå‡è–ªèµ„æ°´å¹³
- **å¾…å‘å¸ƒè–ªèµ„**ï¼ˆç»¿è‰²æ¸å˜ï¼‰- è‰ç¨¿çŠ¶æ€çš„è–ªèµ„è®°å½•æ•°é‡
- **å¾…å¤„ç†ç”³è¯‰**ï¼ˆçº¢è‰²æ¸å˜ï¼‰- å¾…å®¡æ‰¹çš„ç”³è¯‰æ•°é‡

**3. è–ªèµ„åˆ—è¡¨è¡¨æ ¼**
åˆ—è®¾è®¡å¼ºè°ƒæ•°æ®å¯è¯»æ€§ï¼š
- **å‘˜å·¥å§“å**ï¼šå¸¦å¤´åƒåœ†å½¢æ¸å˜èƒŒæ™¯
- **å²—ä½**ï¼šå½©è‰²æ ‡ç­¾ï¼ˆå¨å¸ˆ-æ©™è‰²ã€é¢ç‚¹-çº¢è‰²ç­‰ï¼‰
- **è–ªèµ„é¡¹**ï¼šå³å¯¹é½ï¼Œç­‰å®½å­—ä½“ï¼Œå¸¦è´§å¸ç¬¦å·
  - å²—ä½æ´¥è´´ï¼šç»¿è‰² `+Â¥800`
  - åŠ ç­è´¹ï¼šæ©™è‰²é«˜äº® `+Â¥500`ï¼ˆ>0æ—¶ï¼‰
  - æ‰£æ¬¾ï¼šçº¢è‰² `-Â¥20`
  - å®å‘å·¥èµ„ï¼šæ©™è‰²å¤§å­— `Â¥4280.00`
- **çŠ¶æ€æ ‡ç­¾**ï¼šè‰ç¨¿(ç°)ã€å·²å‘å¸ƒ(ç»¿)ã€å·²è°ƒæ•´(æ©™)ã€ç”³è¯‰ä¸­(çº¢)
- **æ“ä½œæŒ‰é’®**ï¼šè¯¦æƒ…ã€è°ƒæ•´ã€å‘å¸ƒã€åˆ é™¤ï¼ˆå·²å‘å¸ƒä¸å¯è°ƒæ•´ï¼‰

**4. è°ƒæ•´è–ªèµ„å¯¹è¯æ¡†**
ç®¡ç†å‘˜å¯æ‰‹åŠ¨ä¿®æ­£è–ªèµ„æ•°æ®ï¼š
- é¡¶éƒ¨æ˜¾ç¤ºå½“å‰å‘˜å·¥ã€æœˆä»½ã€å®å‘å·¥èµ„æ‘˜è¦
- å¯è°ƒæ•´é¡¹ï¼šåŸºæœ¬å·¥èµ„ã€åŠ ç­è´¹ï¼ˆæ•°å­—è¾“å…¥æ¡†ï¼Œæ­¥è¿›100/50ï¼‰
- è°ƒæ•´åŸå› ï¼šå¿…å¡«æ–‡æœ¬åŸŸï¼ˆ5-200å­—ç¬¦ï¼‰
- ç¡®è®¤æç¤ºï¼šè°ƒæ•´åçŠ¶æ€è‡ªåŠ¨å˜æ›´ä¸º"å·²è°ƒæ•´"

**5. è–ªèµ„è¯¦æƒ…å¯¹è¯æ¡†**
å±•ç¤ºå®Œæ•´è–ªèµ„æ„æˆå’Œè€ƒå‹¤ç»Ÿè®¡ï¼š
- å¤´éƒ¨ï¼šå‘˜å·¥å¤´åƒã€å§“åã€æœˆä»½ã€çŠ¶æ€æ ‡ç­¾
- æ˜ç»†ç½‘æ ¼ï¼šåŸºæœ¬å·¥èµ„ã€å²—ä½æ´¥è´´ã€åŠ ç­è´¹ã€è¿Ÿåˆ°æ‰£æ¬¾ã€ç¼ºå¡æ‰£æ¬¾ã€å®å‘å·¥èµ„
  - å®å‘å·¥èµ„è¡Œï¼šæ©™è‰²æ¸å˜èƒŒæ™¯ï¼Œå¤§å·å­—ä½“
- è€ƒå‹¤ç»Ÿè®¡æ ‡ç­¾ï¼šå‡ºå‹¤å¤©æ•°ã€è¿Ÿåˆ°æ¬¡æ•°ã€ç¼ºå¡æ¬¡æ•°ã€åŠ ç­æ—¶é•¿

**6. ç”³è¯‰å¤„ç†å¯¹è¯æ¡†**
å¤„ç†å‘˜å·¥çš„è€ƒå‹¤/è–ªèµ„ç”³è¯‰ï¼š
- é¡¶éƒ¨è­¦å‘Šæ¡†æ˜¾ç¤ºç”³è¯‰åŸå› 
- å•é€‰æŒ‰é’®ï¼šæ‰¹å‡†ç”³è¯‰ï¼ˆç»¿è‰²âœ…ï¼‰/ æ‹’ç»ç”³è¯‰ï¼ˆçº¢è‰²âŒï¼‰
- å®¡æ‰¹æ„è§ï¼šå¿…å¡«æ–‡æœ¬åŸŸï¼Œæ ¹æ®æ‰¹å‡†/æ‹’ç»æ˜¾ç¤ºä¸åŒæç¤º

#### çŠ¶æ€ç®¡ç†

```javascript
// é¡µé¢çŠ¶æ€
selectedMonth        // å½“å‰é€‰æ‹©çš„æœˆä»½ï¼ˆYYYY-MM æ ¼å¼ï¼‰
salaryList          // è–ªèµ„è®°å½•åˆ—è¡¨
statsData           // ç»Ÿè®¡æ•°æ®ï¼ˆæ€»é¢ã€å¹³å‡ã€å¾…å‘å¸ƒã€å¾…ç”³è¯‰ï¼‰
pagination          // åˆ†é¡µä¿¡æ¯ï¼ˆpage, pageSize, totalï¼‰

// å¯¹è¯æ¡†çŠ¶æ€
adjustDialogVisible     // è°ƒæ•´è–ªèµ„å¯¹è¯æ¡†
detailDialogVisible     // è–ªèµ„è¯¦æƒ…å¯¹è¯æ¡†
appealDialogVisible     // ç”³è¯‰å¤„ç†å¯¹è¯æ¡†

// å½“å‰æ“ä½œå¯¹è±¡
currentSalary       // å½“å‰æŸ¥çœ‹/è°ƒæ•´çš„è–ªèµ„è®°å½•
currentAppeal       // å½“å‰å¤„ç†çš„ç”³è¯‰

// è¡¨å•æ•°æ®
adjustForm          // è°ƒæ•´è¡¨å• { base_salary, overtime_pay, reason }
appealForm          // ç”³è¯‰å®¡æ‰¹è¡¨å• { approve, approval_remark }
```

#### API è°ƒç”¨æµç¨‹

```
é¡µé¢åŠ è½½
  â”‚
  â”œâ”€> loadSalaryList() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚     GET /api/salaries/salaries/?year_month=2024-01&page=1 â”‚
  â”‚     â”‚                                                    â”‚
  â”‚     â””â”€> salaryList = response.data.results              â”‚
  â”‚     â””â”€> updateStats() è®¡ç®—ç»Ÿè®¡æ•°æ®                        â”‚
  â”‚                                                          â”‚
  â”œâ”€> ç”Ÿæˆè–ªèµ„                                               â”‚
  â”‚     generateSalary({ year_month })                      â”‚
  â”‚     POST /api/salaries/salaries/generate/               â”‚
  â”‚     â””â”€> é‡æ–°åŠ è½½åˆ—è¡¨                                     â”‚
  â”‚                                                          â”‚
  â”œâ”€> è°ƒæ•´è–ªèµ„                                               â”‚
  â”‚     adjustSalary(id, { base_salary, overtime_pay, reason })â”‚
  â”‚     POST /api/salaries/salaries/{id}/adjust/            â”‚
  â”‚     â””â”€> é‡æ–°åŠ è½½åˆ—è¡¨                                     â”‚
  â”‚                                                          â”‚
  â”œâ”€> å‘å¸ƒè–ªèµ„                                               â”‚
  â”‚     publishSalary(id)                                   â”‚
  â”‚     POST /api/salaries/salaries/{id}/publish/           â”‚
  â”‚     â””â”€> æ›´æ–°çŠ¶æ€ä¸º"å·²å‘å¸ƒ"                               â”‚
  â”‚                                                          â”‚
  â””â”€> å®¡æ‰¹ç”³è¯‰                                               â”‚
        approveAppeal(id, { approve, approval_remark })      â”‚
        POST /api/salaries/appeals/{id}/approve/            â”‚
        â””â”€> é‡æ–°åŠ è½½åˆ—è¡¨                                     â”‚
```

#### UI è®¾è®¡äº®ç‚¹

**æ¸å˜é…è‰²ç³»ç»Ÿ**
- å¯¹è¯æ¡†æ ‡é¢˜ä½¿ç”¨ä¸åŒæ¸å˜ï¼š
  - è°ƒæ•´è–ªèµ„ï¼šæ©™é»„æ¸å˜ `#FF6B35 â†’ #F7C52D`
  - è–ªèµ„è¯¦æƒ…ï¼šç»¿è‰²æ¸å˜ `#4CAF50 â†’ #8BC34A`
  - ç”³è¯‰å¤„ç†ï¼šçº¢è‰²æ¸å˜ `#F44336 â†’ #FF9800`

**äº¤äº’åŠ¨æ•ˆ**
- ç»Ÿè®¡å¡ç‰‡æ‚¬åœï¼šå‘ä¸Šå¹³ç§»4px + é˜´å½±å¢å¼º + è¾¹æ¡†é«˜äº®
- è¡¨æ ¼è¡Œæ‚¬åœï¼šæµ…ç±³è‰²èƒŒæ™¯ `#FFF8F0`
- å¿«æ·å…¥å£ç®­å¤´ï¼šæ‚¬åœæ—¶ä»å·¦æ»‘å…¥

**å¯è®¿é—®æ€§è®¾è®¡**
- é‡‘é¢ä½¿ç”¨ç­‰å®½å­—ä½“ï¼ˆSF Mono / Consolasï¼‰
- æ•°å­—å³å¯¹é½ä¾¿äºå¯¹æ¯”
- çŠ¶æ€ç”¨é¢œè‰²+æ–‡å­—åŒé‡æ ‡è¯†
- è¡¨å•éªŒè¯å®æ—¶åé¦ˆ

**å“åº”å¼å¸ƒå±€**
- æ¡Œé¢ç«¯ï¼šç»Ÿè®¡å¡ç‰‡4åˆ—ï¼Œè¯¦æƒ…ç½‘æ ¼2åˆ—
- å¹³æ¿ç«¯ï¼šç»Ÿè®¡å¡ç‰‡2åˆ—ï¼Œè¯¦æƒ…ç½‘æ ¼1åˆ—
- ç§»åŠ¨ç«¯ï¼šå…¨éƒ¨å•åˆ—å †å 

#### ä¸åç«¯çš„å¥‘çº¦

**è–ªèµ„çŠ¶æ€æµè½¬**
```
DRAFTï¼ˆè‰ç¨¿ï¼‰
  â”‚
  â”œâ”€> publishSalary() â”€â”€> PUBLISHEDï¼ˆå·²å‘å¸ƒï¼‰
  â”‚
  â””â”€> adjustSalary() â”€â”€> ADJUSTEDï¼ˆå·²è°ƒæ•´ï¼‰
                            â”‚
                            â””â”€> publishSalary() â”€â”€> PUBLISHED

APPEALEDï¼ˆç”³è¯‰ä¸­ï¼‰
  â”‚
  â””â”€> approveAppeal(approve=true) â”€â”€> ADJUSTEDï¼ˆæ‰¹å‡†åè°ƒæ•´è–ªèµ„ï¼‰
      â”‚
      â””â”€> approveAppeal(approve=false) â”€â”€> ä¿æŒåŸçŠ¶æ€
```

**è–ªèµ„è®¡ç®—å…¬å¼ï¼ˆåç«¯æ‰§è¡Œï¼‰**
```
æ—¥å·¥èµ„ = æœˆåŸºæœ¬å·¥èµ„ Ã· 21.75
æ—¶è–ª = æ—¥å·¥èµ„ Ã· 8
åŠ ç­è´¹ = æ—¶è–ª Ã— 1.5 Ã— åŠ ç­å°æ—¶æ•°
å²—ä½æ´¥è´´ = æ ¹æ®å²—ä½å›ºå®šé‡‘é¢
è¿Ÿåˆ°æ‰£æ¬¾ = 20 Ã— è¿Ÿåˆ°æ¬¡æ•°
ç¼ºå¡æ‰£æ¬¾ = 50 Ã— ç¼ºå¡æ¬¡æ•°
å®å‘å·¥èµ„ = åŸºæœ¬å·¥èµ„ + å²—ä½æ´¥è´´ + åŠ ç­è´¹ - è¿Ÿåˆ°æ‰£æ¬¾ - ç¼ºå¡æ‰£æ¬¾
```

å‰ç«¯åªè´Ÿè´£å±•ç¤ºå’Œæ‰‹åŠ¨è°ƒæ•´ï¼Œè®¡ç®—é€»è¾‘å…¨éƒ¨åœ¨åç«¯å®Œæˆï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§ã€‚

---

### `StatisticsView.vue` - ç»¼åˆç»Ÿè®¡åˆ†æé¡µé¢

ç»¼åˆç»Ÿè®¡åˆ†æé¡µé¢æ˜¯ç®¡ç†å‘˜ç«¯çš„æ•°æ®å¯è§†åŒ–ä¸­å¿ƒï¼Œé€šè¿‡ ECharts å›¾è¡¨å±•ç¤ºäººå‘˜ã€è€ƒå‹¤ã€è–ªèµ„ç­‰å¤šç»´åº¦ç»Ÿè®¡æ•°æ®ã€‚

#### é¡µé¢ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é¡µé¢æ ‡é¢˜: ğŸ“Š ç»¼åˆç»Ÿè®¡åˆ†æ                                 â”‚
â”‚ æ•°æ®é©±åŠ¨å†³ç­–ï¼Œæ´å¯Ÿé£Ÿå ‚è¿è¥å…¨è²Œ                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é¡¶éƒ¨ç»Ÿè®¡å¡ç‰‡ï¼ˆ4ä¸ªï¼‰                                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚ â”‚å‘˜å·¥æ€»æ•° â”‚ â”‚å‡ºå‹¤ç‡  â”‚ â”‚è–ªèµ„æ”¯å‡º â”‚ â”‚å¾…å¤„ç†  â”‚         â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ äººå‘˜ç»“æ„åˆ†æ                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚ â”‚  å²—ä½åˆ†å¸ƒé¥¼å›¾    â”‚ â”‚  æŒè¯ç‡ç»Ÿè®¡å¡ç‰‡         â”‚         â”‚
â”‚ â”‚  ï¼ˆç¯å½¢å›¾+å›¾ä¾‹ï¼‰ â”‚ â”‚  - å¥åº·è¯æŒè¯ç‡         â”‚         â”‚
â”‚ â”‚                 â”‚ â”‚  - å¨å¸ˆè¯æŒè¯ç‡         â”‚         â”‚
â”‚ â”‚                 â”‚ â”‚  - åœ¨èŒçŠ¶æ€åˆ†å¸ƒ         â”‚         â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è€ƒå‹¤è¶‹åŠ¿åˆ†æ                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚ â”‚ å‡ºå‹¤ç‡æŠ˜çº¿å›¾    â”‚ â”‚ å²—ä½è€ƒå‹¤æ’è¡ŒæŸ±çŠ¶å›¾      â”‚         â”‚
â”‚ â”‚ ï¼ˆæœ€è¿‘7å¤©ï¼‰     â”‚ â”‚ ï¼ˆè¿Ÿåˆ°/ç¼ºå¡ç»Ÿè®¡ï¼‰       â”‚         â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚ â”‚          è€ƒå‹¤çŠ¶æ€åˆ†å¸ƒå¡ç‰‡                    â”‚         â”‚
â”‚ â”‚    ï¼ˆæ­£å¸¸âœ“ã€è¿Ÿåˆ°â°ã€æ—©é€€â‡ ã€ç¼ºå¡?ã€å¼‚å¸¸!ï¼‰     â”‚         â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è–ªèµ„æ”¯å‡ºåˆ†æ                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚ â”‚è–ªèµ„æ”¯å‡ºè¶‹åŠ¿å›¾   â”‚ â”‚  è–ªèµ„æ„æˆé¥¼å›¾           â”‚         â”‚
â”‚ â”‚ï¼ˆæœ€è¿‘12ä¸ªæœˆï¼‰   â”‚ â”‚ï¼ˆåŸºæœ¬/æ´¥è´´/åŠ ç­/æ‰£æ¬¾ï¼‰   â”‚         â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚ â”‚           å²—ä½è–ªèµ„å¯¹æ¯”æŸ±çŠ¶å›¾                  â”‚         â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

**1. é¡¶éƒ¨ç»Ÿè®¡å¡ç‰‡**
- **å‘˜å·¥æ€»æ•°**ï¼šæ˜¾ç¤ºåœ¨èŒäººå‘˜æ•°é‡ï¼ŒèƒŒæ™¯æ©™é»„æ¸å˜
- **ä»Šæ—¥å‡ºå‹¤ç‡**ï¼šå®æ—¶ç™¾åˆ†æ¯”ï¼Œæ˜¾ç¤ºè¿Ÿåˆ°äººæ•°æˆ–"å…¨å‘˜å‡†æ—¶"
- **æœ¬æœˆè–ªèµ„æ”¯å‡º**ï¼šæ ¼å¼åŒ–ä¸ºåƒåˆ†ä½ï¼Œå«å²—ä½æ´¥è´´æç¤º
- **å¾…å¤„ç†äº‹é¡¹**ï¼šå¾…å®¡æ‰¹æ•°é‡ï¼Œ"éœ€è¦å¤„ç†"æˆ–"å…¨éƒ¨å®Œæˆ"çŠ¶æ€

**2. äººå‘˜ç»“æ„åˆ†æ**
- **å²—ä½åˆ†å¸ƒé¥¼å›¾**ï¼šç¯å½¢é¥¼å›¾å±•ç¤º6ç§å²—ä½å æ¯”
  - è‡ªå®šä¹‰é¢œè‰²æ•°ç»„ï¼šæ©™#FF6B35ã€é»„#F7C52Dã€ç»¿#4CAF50ã€è“#2196F3ã€ç´«#9C27B0ã€æ£•#795548
  - åº•éƒ¨è‡ªå®šä¹‰å›¾ä¾‹ï¼Œæ˜¾ç¤ºå²—ä½åå’Œäººæ•°
  - æ‚¬åœæ˜¾ç¤ºè¯¦æƒ…ï¼ˆåç§°ã€äººæ•°ã€ç™¾åˆ†æ¯”ï¼‰
- **æŒè¯ç‡ç»Ÿè®¡**ï¼š
  - å¥åº·è¯æŒè¯ç‡ï¼šç»¿è‰²è¿›åº¦æ¡ï¼Œæ˜¾ç¤ºå·²æŒè¯/æ€»äººæ•°
  - å¨å¸ˆè¯æŒè¯ç‡ï¼šè“è‰²è¿›åº¦æ¡ï¼Œä»…å¯¹å¨å¸ˆå²—ä½ç»Ÿè®¡
  - åœ¨èŒçŠ¶æ€åˆ†å¸ƒï¼šæ¨ªå‘æ¡å½¢å›¾ï¼ˆåœ¨èŒ/ç¦»èŒ/åœè–ªç•™èŒï¼‰

**3. è€ƒå‹¤è¶‹åŠ¿åˆ†æ**
- **å‡ºå‹¤ç‡æŠ˜çº¿å›¾**ï¼šæœ€è¿‘7å¤©åŒæŠ˜çº¿å›¾
  - æ­£å¸¸å‡ºå‹¤ï¼ˆç»¿è‰²ï¼‰+ è¿Ÿåˆ°ï¼ˆæ©™è‰²ï¼‰
  - æ¸å˜é¢ç§¯å¡«å……ï¼Œå¹³æ»‘æ›²çº¿
  - è‡ªå®šä¹‰ Y è½´æ ¼å¼
- **å²—ä½è€ƒå‹¤æ’è¡ŒæŸ±çŠ¶å›¾**ï¼šåŒæŸ±çŠ¶å›¾
  - è¿Ÿåˆ°ï¼ˆæ©™æ¸å˜ï¼‰+ ç¼ºå¡ï¼ˆç°æ¸å˜ï¼‰
  - åœ†è§’æŸ±ä½“ï¼Œæ‚¬åœæ˜¾ç¤ºæ•°å€¼
- **è€ƒå‹¤çŠ¶æ€åˆ†å¸ƒå¡ç‰‡**ï¼š
  - 5ç§çŠ¶æ€ï¼šæ­£å¸¸âœ“ã€è¿Ÿåˆ°â°ã€æ—©é€€â‡ ã€ç¼ºå¡?ã€å¼‚å¸¸!
  - å½©è‰²åœ†å½¢å›¾æ ‡ + åç§° + æ¬¡æ•°

**4. è–ªèµ„æ”¯å‡ºåˆ†æ**
- **è–ªèµ„æ”¯å‡ºè¶‹åŠ¿å›¾**ï¼šæœ€è¿‘12ä¸ªæœˆæŠ˜çº¿å›¾
  - æ©™è‰²æ¸å˜é¢ç§¯å¡«å……
  - æ‚¬åœæ˜¾ç¤ºæ€»æ”¯å‡ºå’Œå¹³å‡è–ªèµ„
  - Yè½´å•ä½ï¼šä¸‡å…ƒï¼ˆè‡ªåŠ¨æ ¼å¼åŒ–ï¼‰
- **è–ªèµ„æ„æˆé¥¼å›¾**ï¼šç¯å½¢é¥¼å›¾
  - 4ä¸ªéƒ¨åˆ†ï¼šåŸºæœ¬å·¥èµ„ï¼ˆæ©™ï¼‰ã€å²—ä½æ´¥è´´ï¼ˆé»„ï¼‰ã€åŠ ç­è´¹ï¼ˆç»¿ï¼‰ã€æ‰£æ¬¾ï¼ˆçº¢ï¼‰
  - å³ä¾§å›¾ä¾‹ï¼Œåº•éƒ¨æ˜¾ç¤ºç™¾åˆ†æ¯”
- **å²—ä½è–ªèµ„å¯¹æ¯”æŸ±çŠ¶å›¾**ï¼š
  - æ©™è‰²æ¸å˜æŸ±çŠ¶å›¾
  - é¡¶éƒ¨æ ‡ç­¾æ ¼å¼åŒ–ä¸º Â¥X.Xk
  - æ‚¬åœæ˜¾ç¤ºå®Œæ•´è–ªèµ„

#### çŠ¶æ€ç®¡ç†

```javascript
// åŠ è½½çŠ¶æ€
overviewLoading        // æ€»è§ˆæ•°æ®åŠ è½½
employeeLoading        // äººå‘˜ç»Ÿè®¡åŠ è½½
attendanceLoading      // è€ƒå‹¤ç»Ÿè®¡åŠ è½½
salaryLoading          // è–ªèµ„ç»Ÿè®¡åŠ è½½

// æ•°æ®å“åº”å¼å˜é‡
overviewData           // æ€»è§ˆæ•°æ® { total_count, attendance_rate, ... }
employeeData           // äººå‘˜æ•°æ® { position_distribution, status_distribution, ... }
attendanceData         // è€ƒå‹¤æ•°æ® { daily_trend, position_stats, ... }
salaryData             // è–ªèµ„æ•°æ® { monthly_trend, composition, ... }

// å›¾è¡¨ DOM å¼•ç”¨
positionChartRef           // å²—ä½åˆ†å¸ƒå›¾å®¹å™¨
attendanceTrendChartRef    // å‡ºå‹¤è¶‹åŠ¿å›¾å®¹å™¨
positionRankingChartRef    // å²—ä½æ’è¡Œå›¾å®¹å™¨
salaryTrendChartRef        // è–ªèµ„è¶‹åŠ¿å›¾å®¹å™¨
salaryCompChartRef         // è–ªèµ„æ„æˆå›¾å®¹å™¨
positionSalaryChartRef     // å²—ä½è–ªèµ„å›¾å®¹å™¨

// å›¾è¡¨å®ä¾‹æ•°ç»„
charts                   // å­˜å‚¨6ä¸ª ECharts å®ä¾‹ï¼Œç”¨äº resize å’Œ dispose
```

#### API è°ƒç”¨æµç¨‹

```
é¡µé¢æŒ‚è½½
  â”‚
  â”œâ”€> å¹¶è¡Œè°ƒç”¨4ä¸ªAPIï¼ˆPromise.allï¼‰
  â”‚     â”œâ”€> loadOverviewData() â”€â”€â”€ GET /api/analytics/overview/
  â”‚     â”œâ”€> loadEmployeeData() â”€â”€â”€ GET /api/analytics/employees/
  â”‚     â”œâ”€> loadAttendanceData() â”€ GET /api/analytics/attendance/?days=7
  â”‚     â””â”€> loadSalaryData() â”€â”€â”€â”€â”€ GET /api/analytics/salaries/?months=12
  â”‚
  â”œâ”€> æ•°æ®è¿”å›ååˆå§‹åŒ–6ä¸ªå›¾è¡¨
  â”‚     â”œâ”€> initPositionChart()          // å²—ä½åˆ†å¸ƒé¥¼å›¾
  â”‚     â”œâ”€> initAttendanceTrendChart()   // å‡ºå‹¤ç‡æŠ˜çº¿å›¾
  â”‚     â”œâ”€> initPositionRankingChart()   // å²—ä½æ’è¡ŒæŸ±çŠ¶å›¾
  â”‚     â”œâ”€> initSalaryTrendChart()       // è–ªèµ„è¶‹åŠ¿å›¾
  â”‚     â”œâ”€> initSalaryCompChart()        // è–ªèµ„æ„æˆé¥¼å›¾
  â”‚     â””â”€> initPositionSalaryChart()    // å²—ä½è–ªèµ„æŸ±çŠ¶å›¾
  â”‚
  â”œâ”€> æ·»åŠ  resize äº‹ä»¶ç›‘å¬å™¨ï¼ˆå“åº”å¼å›¾è¡¨ï¼‰
  â”‚
  â””â”€> ç»„ä»¶å¸è½½æ—¶ï¼šç§»é™¤ç›‘å¬å™¨ + é”€æ¯æ‰€æœ‰å›¾è¡¨å®ä¾‹
```

#### UI è®¾è®¡äº®ç‚¹

**æ¸å˜é…è‰²ç³»ç»Ÿ**
- é¡µé¢æ ‡é¢˜èƒŒæ™¯ï¼šæ©™#FF6B35 â†’ æ©™#FF8C42 æ¸å˜
- èƒŒæ™¯æ¸å˜ï¼šæµ…ç±³è‰²#FFF8F0 â†’ æµ…æ©™è‰²#FFE8D6ï¼ˆä»ä¸Šåˆ°ä¸‹ï¼‰
- å¡ç‰‡èƒŒæ™¯ï¼šç™½è‰²ï¼Œå¸¦æ©™è‰²è°ƒé˜´å½±
- å›¾è¡¨é…è‰²ï¼šæš–è‰²è°ƒæ¸å˜ï¼ˆæ©™â†’é»„ã€ç»¿æ¸å˜ã€ç°æ¸å˜ï¼‰

**åŠ¨ç”»æ•ˆæœ**
- æ ‡é¢˜å›¾æ ‡æµ®åŠ¨åŠ¨ç”»ï¼ˆä¸Šä¸‹æµ®åŠ¨ï¼Œ3ç§’å¾ªç¯ï¼‰
- å¡ç‰‡æ‚¬åœï¼šå‘ä¸Šå¹³ç§»6px + é˜´å½±å¢å¼º
- è¿›åº¦æ¡å®½åº¦è¿‡æ¸¡åŠ¨ç”»ï¼ˆ0.6ç§’ easeï¼‰

**æ•°æ®å¯è§†åŒ–ä¼˜åŒ–**
- æ‰€æœ‰å›¾è¡¨æ‚¬åœæç¤ºæ¡†ï¼šç™½è‰²åŠé€æ˜èƒŒæ™¯ + æ©™è‰²è¾¹æ¡†
- é¥¼å›¾ä½¿ç”¨ç¯å½¢è®¾è®¡ï¼Œæ›´ç°ä»£
- æŠ˜çº¿å›¾ä½¿ç”¨æ¸å˜é¢ç§¯å¡«å……
- æŸ±çŠ¶å›¾ä½¿ç”¨æ¸å˜è‰² + åœ†è§’
- è´§å¸æ ¼å¼åŒ–ï¼šåƒåˆ†ä½åˆ†éš” + Â¥ å‰ç¼€
- å¤§æ•°å€¼ç®€åŒ–ï¼šä¸‡å…ƒã€X.Xk æ ¼å¼

**å“åº”å¼è®¾è®¡**
- Grid å¸ƒå±€è‡ªåŠ¨è°ƒæ•´ï¼ˆauto-fit + minmaxï¼‰
- æ–­ç‚¹ï¼š1024pxï¼ˆåŒåˆ—â†’å•åˆ—ï¼‰ã€768pxï¼ˆå››åˆ—â†’åŒåˆ—ï¼‰
- å›¾è¡¨å®¹å™¨ä½¿ç”¨ min-height ç¡®ä¿å¯è¯»æ€§
- ç›‘å¬ window resize äº‹ä»¶ï¼ŒåŠ¨æ€è°ƒæ•´å›¾è¡¨å°ºå¯¸

#### æŠ€æœ¯å®ç°è¦ç‚¹

**å›¾è¡¨é…ç½®æ¨¡å¼**
```javascript
const option = {
  tooltip: {
    trigger: 'item' / 'axis',
    backgroundColor: 'rgba(255, 255, 255, 0.95)',
    borderColor: '#FF6B35',
    borderWidth: 1,
    formatter: customFormatter  // è‡ªå®šä¹‰æ ¼å¼åŒ–å‡½æ•°
  },
  grid: {
    left: '3%', right: '4%', bottom: '3%', top: '10%',
    containLabel: true  // é˜²æ­¢æ ‡ç­¾æº¢å‡º
  },
  xAxis: {
    axisLine: { lineStyle: { color: '#ddd' } },
    axisLabel: { color: '#666' }
  },
  yAxis: {
    axisLine: { show: false },
    splitLine: { lineStyle: { color: '#f0f0f0', type: 'dashed' } }
  },
  series: [
    {
      itemStyle: {
        color: new echarts.graphic.LinearGradient(...)  // æ¸å˜è‰²
      },
      areaStyle: {
        color: new echarts.graphic.LinearGradient(...)  // æ¸å˜å¡«å……
      }
    }
  ]
}
```

**å˜é‡ä½œç”¨åŸŸæ³¨æ„äº‹é¡¹**
- é¿å…å±€éƒ¨å˜é‡ä¸å“åº”å¼å˜é‡é‡å
- ç¤ºä¾‹é”™è¯¯ï¼š`const salaryData = ...` ä¸ `salaryData.value` å†²çª
- æ­£ç¡®åšæ³•ï¼šä½¿ç”¨ä¸åŒçš„å˜é‡åï¼Œå¦‚ `salaryAmounts`

**å›¾è¡¨ç”Ÿå‘½å‘¨æœŸç®¡ç†**
```javascript
// åˆ›å»ºå›¾è¡¨
const chart = echarts.init(domRef)
charts.push(chart)

// å“åº”å¼è°ƒæ•´
window.addEventListener('resize', handleResize)
const handleResize = () => charts.forEach(c => c.resize())

// é”€æ¯å›¾è¡¨
onUnmounted(() => {
  window.removeEventListener('resize', handleResize)
  charts.forEach(c => c.dispose())
  charts = []
})
```

#### è·¯ç”±ä¸èœå•

**è·¯ç”±é…ç½®**ï¼š
```javascript
{
  path: 'statistics',
  name: 'Statistics',
  component: () => import('../views/admin/StatisticsView.vue'),
  meta: { requiresAuth: true, role: 'ADMIN' }
}
```

**èœå•é…ç½®**ï¼š
- èœå•é¡¹è·¯å¾„ï¼š`/admin/statistics`
- å›¾æ ‡ï¼šTrendChartsï¼ˆElement Plus å†…ç½®å›¾æ ‡ï¼‰
- æ ‡é¢˜ï¼šç»Ÿè®¡åˆ†æ
- é¢åŒ…å±‘æ˜ å°„ï¼š`/admin/statistics` â†’ 'ç»Ÿè®¡åˆ†æ'

#### ä¸åç«¯çš„å¥‘çº¦

**API ç«¯ç‚¹**ï¼š
```
GET /api/analytics/overview/     # æ€»è§ˆç»Ÿè®¡ï¼ˆDashboard ä¸“ç”¨ï¼‰
GET /api/analytics/employees/    # äººå‘˜ç»Ÿè®¡
GET /api/analytics/attendance/?days=7   # è€ƒå‹¤ç»Ÿè®¡
GET /api/analytics/salaries/?months=12  # è–ªèµ„ç»Ÿè®¡
```

**æ•°æ®æ ¼å¼çº¦å®š**ï¼š
- ç»Ÿä¸€å“åº”æ ¼å¼ï¼š`{ code: 200, message: 'æˆåŠŸ', data: {...} }`
- é¥¼å›¾æ•°æ®ï¼š`{ labels: [], data: [] }`
- æŠ˜çº¿å›¾æ•°æ®ï¼š`[{ date: '2024-01-15', normal: 18, late: 1 }, ...]`
- æŸ±çŠ¶å›¾æ•°æ®ï¼š`[{ position: 'å¨å¸ˆ', late_count: 5, missing_count: 1 }, ...]`

#### æ€§èƒ½ä¼˜åŒ–

**å¹¶è¡Œè¯·æ±‚**ï¼šä½¿ç”¨ `Promise.all()` åŒæ—¶å‘èµ·4ä¸ª API è¯·æ±‚ï¼Œå‡å°‘æ€»åŠ è½½æ—¶é—´

**å›¾è¡¨æ‡’åŠ è½½**ï¼šåªæœ‰æ•°æ®è¿”å›åæ‰åˆå§‹åŒ–å›¾è¡¨ï¼Œé¿å…æ¸²æŸ“ç©ºå›¾è¡¨

**é˜²æŠ–å¤„ç†**ï¼šresize äº‹ä»¶ä½¿ç”¨ ECharts å†…ç½®çš„ `resize()` æ–¹æ³•ï¼Œå·²åšé˜²æŠ–å¤„ç†

**å†…å­˜ç®¡ç†**ï¼šç»„ä»¶å¸è½½æ—¶å¿…é¡»é”€æ¯å›¾è¡¨å®ä¾‹ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼

#### è°ƒè¯•ç»éªŒ

**é—®é¢˜1ï¼šå˜é‡åå†²çª**
- ç—‡çŠ¶ï¼š`Cannot access 'salaryData' before initialization`
- åŸå› ï¼šå±€éƒ¨å˜é‡ `const salaryData` ä¸å“åº”å¼å˜é‡ `salaryData` é‡å
- è§£å†³ï¼šé‡å‘½åå±€éƒ¨å˜é‡ä¸º `salaryAmounts`

**é—®é¢˜2ï¼šè¿è¡Œæ—¶ç¼–è¯‘è­¦å‘Š**
- ç—‡çŠ¶ï¼š`Component provided template option but runtime compilation is not supported`
- åŸå› ï¼šä½¿ç”¨ `template` å­—ç¬¦ä¸²å®šä¹‰ç»„ä»¶ï¼ˆFoodIconï¼‰
- è§£å†³ï¼šæ›¿æ¢ä¸º Element Plus å†…ç½®å›¾æ ‡ï¼ˆGridï¼‰

**é—®é¢˜3ï¼šå›¾è¡¨ä¸æ˜¾ç¤º**
- æ£€æŸ¥ç‚¹ï¼šDOM å®¹å™¨æ˜¯å¦å­˜åœ¨ã€é«˜åº¦æ˜¯å¦è¶³å¤Ÿã€æ•°æ®æ˜¯å¦æ­£ç¡®
- è°ƒè¯•æ–¹æ³•ï¼š`console.log(chart)` æ£€æŸ¥å®ä¾‹ã€`chart.getOption()` æ£€æŸ¥é…ç½®
